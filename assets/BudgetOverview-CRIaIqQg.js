import{c as k,j as e,B as b,t as D,d as N,a as se,b as ae,P as _,e as ne,f as g,C as f,g as j,h as v,T as re,i as y}from"./index-BvYtcx4O.js";import{r as p}from"./react-DDKPen9N.js";import{u as A}from"./vendor-DL6J-QeD.js";import{I as C}from"./index-MPzi5exS.js";import{L as h}from"./label-3o7zzb95.js";import{D as G,a as U,b as Y,c as X,d as ie,e as le,f as oe,P as de}from"./dialog-0t7jHfb4.js";import{S as F,a as M,b as B,c as P,d as w}from"./select-C012jyCn.js";import{S as ce}from"./switch-ByIbzdZf.js";import{C as ue,a as xe}from"./chevron-right-vqCnerS2.js";import{T as me}from"./trending-up-DKHjy3CO.js";import"./index-BdQq_4o_.js";import"./index-DUopk3yw.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=k("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=k("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=k("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);function ge({isOpen:t,onClose:i,onTransactionAdded:m}){const[c,o]=p.useState(!1),[n,s]=p.useState({amount:"",type:"expense",category:"",description:"",date:new Date().toISOString().split("T")[0],frequency:"monthly",endDate:"",goalId:""}),r=A(()=>N.goals.where("category").equals("financial").toArray()),d=["Housing","Transportation","Food","Utilities","Healthcare","Entertainment","Shopping","Education","Savings","Other"],S=["Salary","Freelance","Business","Investments","Gifts","Other"],T=n.type==="income"?S:d,I=async l=>{if(l.preventDefault(),!n.amount||!n.category){D({title:"Missing Information",description:"Please fill in all required fields.",variant:"destructive"});return}try{c?await N.recurringTransactions.add({amount:parseFloat(n.amount),type:n.type,category:n.category,description:n.description,startDate:new Date(n.date),frequency:n.frequency,endDate:n.endDate?new Date(n.endDate):void 0,nextDueDate:new Date(n.date),isActive:!0,createdAt:new Date}):await se({amount:parseFloat(n.amount),type:n.type,category:n.category,description:n.description,date:new Date(n.date),goalId:n.goalId?parseInt(n.goalId,10):void 0}),D({title:"Transaction Added",description:`Your ${n.type} has been recorded successfully.`}),o(!1),s({amount:"",type:"expense",category:"",description:"",date:new Date().toISOString().split("T")[0],frequency:"monthly",endDate:"",goalId:""}),m(),i()}catch{D({title:"Error",description:"Failed to add transaction. Please try again.",variant:"destructive"})}};return e.jsx(G,{open:t,onOpenChange:i,children:e.jsxs(U,{className:"sm:max-w-[425px]",children:[e.jsxs(Y,{children:[e.jsx(X,{className:"text-xl bg-gradient-zenith bg-clip-text text-transparent",children:"Record Transaction"}),e.jsx(ie,{children:"Track your financial flow with mindful awareness. Every transaction shapes your path."})]}),e.jsxs("form",{onSubmit:I,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(h,{htmlFor:"type",children:"Type"}),e.jsxs(F,{value:n.type,onValueChange:l=>s(x=>({...x,type:l,category:""})),children:[e.jsx(M,{id:"type",children:e.jsx(B,{})}),e.jsxs(P,{children:[e.jsx(w,{value:"income",children:"Income"}),e.jsx(w,{value:"expense",children:"Expense"})]})]})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"amount",children:"Amount"}),e.jsx(C,{id:"amount",type:"number",step:"0.01",placeholder:"0.00",value:n.amount,onChange:l=>s(x=>({...x,amount:l.target.value})),required:!0})]})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"category",children:"Category"}),e.jsxs(F,{value:n.category,onValueChange:l=>s(x=>({...x,category:l})),children:[e.jsx(M,{id:"category",children:e.jsx(B,{placeholder:"Select a category"})}),e.jsx(P,{children:T.map(l=>e.jsx(w,{value:l,children:l},l))})]})]}),n.type==="income"&&r&&r.length>0&&e.jsxs("div",{children:[e.jsx(h,{htmlFor:"goal",children:"Link to Financial Goal (Optional)"}),e.jsxs(F,{value:n.goalId,onValueChange:l=>s(x=>({...x,goalId:l})),children:[e.jsx(M,{id:"goal",children:e.jsx(B,{placeholder:"Select a goal to contribute to"})}),e.jsx(P,{children:r.map(l=>e.jsx(w,{value:String(l.id),children:l.title},l.id))})]})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"description",children:"Description"}),e.jsx(C,{id:"description",placeholder:"Brief description...",value:n.description,onChange:l=>s(x=>({...x,description:l.target.value}))})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"date",children:"Date"}),e.jsx(C,{id:"date",type:"date",value:n.date,onChange:l=>s(x=>({...x,date:l.target.value})),required:!0})]}),e.jsxs("div",{className:"flex items-center space-x-2 pt-2",children:[e.jsx(ce,{id:"recurring-switch",checked:c,onCheckedChange:o}),e.jsx(h,{htmlFor:"recurring-switch",children:"This is a recurring transaction"})]}),c&&e.jsxs("div",{className:"space-y-4 pt-4 border-t border-border/50",children:[e.jsxs("div",{children:[e.jsx(h,{htmlFor:"frequency",children:"Frequency"}),e.jsxs(F,{value:n.frequency,onValueChange:l=>s(x=>({...x,frequency:l})),children:[e.jsx(M,{id:"frequency",children:e.jsx(B,{placeholder:"Select frequency"})}),e.jsxs(P,{children:[e.jsx(w,{value:"daily",children:"Daily"}),e.jsx(w,{value:"weekly",children:"Weekly"}),e.jsx(w,{value:"monthly",children:"Monthly"}),e.jsx(w,{value:"yearly",children:"Yearly"})]})]})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"endDate",children:"End Date (Optional)"}),e.jsx(C,{id:"endDate",type:"date",value:n.endDate,onChange:l=>s(x=>({...x,endDate:l.target.value}))})]})]}),e.jsxs(le,{className:"pt-4 gap-2",children:[e.jsx(b,{type:"button",variant:"outline",onClick:i,children:"Cancel"}),e.jsx(b,{type:"submit",variant:"zenith",children:"Record Transaction"})]})]})]})})}const V=["Housing","Transportation","Food","Utilities","Healthcare","Entertainment","Shopping","Education","Savings","Other"];function pe({month:t}){const[i,m]=p.useState({}),c=A(()=>N.budgets.where("month").equals(t).toArray(),[t]);p.useEffect(()=>{if(c){const s=c.reduce((r,d)=>(r[d.category]=String(d.amount),r),{});m(s)}},[c]);const o=(s,r)=>{m(d=>({...d,[s]:r}))},n=async()=>{try{for(const s of V){const r=parseFloat(i[s])||0,d=await N.budgets.where({month:t,category:s}).first();d?r>0?await N.budgets.update(d.id,{amount:r}):await N.budgets.delete(d.id):r>0&&await N.budgets.add({category:s,month:t,amount:r,createdAt:new Date})}D({title:"Budgets Saved",description:`Budgets for ${t} have been updated.`})}catch(s){console.error("Failed to save budgets:",s),D({title:"Error",description:"Failed to save budgets.",variant:"destructive"})}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-medium",children:["Set Budgets for ",t]}),e.jsx("div",{className:"space-y-2",children:V.map(s=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(h,{htmlFor:`budget-${s}`,children:s}),e.jsx(C,{id:`budget-${s}`,type:"number",step:"0.01",placeholder:"0.00",className:"w-32",value:i[s]||"",onChange:r=>o(s,r.target.value)})]},s))}),e.jsx(b,{onClick:n,className:"w-full",children:"Save Budgets"})]})}var q="Progress",R=100,[fe,ke]=ae(q),[je,ve]=fe(q),Q=p.forwardRef((t,i)=>{const{__scopeProgress:m,value:c=null,max:o,getValueLabel:n=ye,...s}=t;(o||o===0)&&!z(o)&&console.error(Ne(`${o}`,"Progress"));const r=z(o)?o:R;c!==null&&!H(c,r)&&console.error(we(`${c}`,"Progress"));const d=H(c,r)?c:null,S=O(d)?n(d,r):void 0;return e.jsx(je,{scope:m,value:d,max:r,children:e.jsx(_.div,{"aria-valuemax":r,"aria-valuemin":0,"aria-valuenow":O(d)?d:void 0,"aria-valuetext":S,role:"progressbar","data-state":K(d,r),"data-value":d??void 0,"data-max":r,...s,ref:i})})});Q.displayName=q;var W="ProgressIndicator",J=p.forwardRef((t,i)=>{const{__scopeProgress:m,...c}=t,o=ve(W,m);return e.jsx(_.div,{"data-state":K(o.value,o.max),"data-value":o.value??void 0,"data-max":o.max,...c,ref:i})});J.displayName=W;function ye(t,i){return`${Math.round(t/i*100)}%`}function K(t,i){return t==null?"indeterminate":t===i?"complete":"loading"}function O(t){return typeof t=="number"}function z(t){return O(t)&&!isNaN(t)&&t>0}function H(t,i){return O(t)&&!isNaN(t)&&t<=i&&t>=0}function Ne(t,i){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${i}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${R}\`.`}function we(t,i){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${i}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${R} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var Z=Q,be=J;const ee=p.forwardRef(({className:t,value:i,...m},c)=>e.jsx(Z,{ref:c,className:ne("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...m,children:e.jsx(be,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(i||0)}%)`}})}));ee.displayName=Z.displayName;function Se({category:t,spent:i,budgeted:m}){const c=m>0?i/m*100:0,o=i>m;return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-sm font-medium",children:[e.jsx("span",{children:t}),e.jsxs("span",{className:o?"text-red-500":"text-muted-foreground",children:[g(i)," / ",g(m)]})]}),e.jsx(ee,{value:c,className:o?"[&>div]:bg-red-500":""})]})}function qe(){const[t,i]=p.useState(!1),[m,c]=p.useState(!1),[o,n]=p.useState(new Date().toISOString().slice(0,7)),s=A(()=>{const a=new Date,u=new Date(a.getFullYear(),a.getMonth(),1),te=new Date(a.getFullYear(),a.getMonth()+1,0);return N.transactions.where("date").between(u,te).toArray()},[]),r=(s==null?void 0:s.reduce((a,u)=>(u.type==="income"?a.income+=u.amount:a.expenses+=u.amount,a.balance=a.income-a.expenses,a),{income:0,expenses:0,balance:0}))||{income:0,expenses:0,balance:0},d=A(()=>N.budgets.where("month").equals(o).toArray(),[o]),S=(d==null?void 0:d.reduce((a,u)=>a+u.amount,0))??0,T=r.expenses,I=S-T,l=r.income-r.expenses,x=a=>{const u=new Date(`${o}-02`);a==="prev"?u.setMonth(u.getMonth()-1):u.setMonth(u.getMonth()+1),n(u.toISOString().slice(0,7))},E=s==null?void 0:s.filter(a=>a.type==="expense").reduce((a,u)=>(a[u.category]||(a[u.category]=0),a[u.category]+=u.amount,a),{});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold bg-gradient-zenith bg-clip-text text-transparent",children:"Budget Overview"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{variant:"outline",size:"icon",onClick:()=>x("prev"),children:e.jsx(ue,{className:"h-4 w-4"})}),e.jsx("span",{className:"text-lg font-semibold w-36 text-center",children:new Date(`${o}-02`).toLocaleString("default",{month:"long",year:"numeric"})}),e.jsx(b,{variant:"outline",size:"icon",onClick:()=>x("next"),children:e.jsx(xe,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(G,{open:m,onOpenChange:c,children:[e.jsx(oe,{asChild:!0,children:e.jsx(b,{variant:"outline",children:"Manage Budgets"})}),e.jsxs(U,{children:[e.jsx(Y,{children:e.jsx(X,{children:"Budget Settings"})}),e.jsx(pe,{month:o})]})]}),e.jsxs(b,{onClick:()=>i(!0),children:[e.jsx(de,{className:"h-4 w-4 mr-2"}),"Add Transaction"]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4 mb-4",children:[e.jsxs(f,{children:[e.jsxs(j,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(v,{className:"text-sm font-medium",children:"Total Budget"}),e.jsx(re,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(y,{children:e.jsx("div",{className:"text-2xl font-bold",children:g(S)})})]}),e.jsxs(f,{children:[e.jsxs(j,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(v,{className:"text-sm font-medium",children:"Spent"}),e.jsx(L,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(y,{children:e.jsx("div",{className:"text-2xl font-bold text-red-500",children:g(T)})})]}),e.jsxs(f,{children:[e.jsxs(j,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(v,{className:"text-sm font-medium",children:"Remaining"}),e.jsx($,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(y,{children:e.jsx("div",{className:`text-2xl font-bold ${I>=0?"text-green-500":"text-orange-500"}`,children:g(I)})})]}),e.jsxs(f,{children:[e.jsxs(j,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(v,{className:"text-sm font-medium",children:"Net Flow"}),e.jsx(he,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(y,{children:e.jsx("div",{className:`text-2xl font-bold ${l>=0?"text-blue-500":"text-orange-500"}`,children:g(l)})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(f,{className:"bg-gradient-subtle shadow-soft hover:shadow-zenith transition-all duration-300",children:[e.jsxs(j,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(v,{className:"text-sm font-medium text-muted-foreground",children:"Monthly Income"}),e.jsx(me,{className:"h-4 w-4 text-earth-ring"})]}),e.jsxs(y,{children:[e.jsx("div",{className:"text-2xl font-bold text-earth-ring",children:g(r.income)}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Foundation of prosperity"})]})]}),e.jsxs(f,{className:"bg-gradient-subtle shadow-soft hover:shadow-zenith transition-all duration-300",children:[e.jsxs(j,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(v,{className:"text-sm font-medium text-muted-foreground",children:"Monthly Expenses"}),e.jsx(L,{className:"h-4 w-4 text-fire-ring"})]}),e.jsxs(y,{children:[e.jsx("div",{className:"text-2xl font-bold text-fire-ring",children:g(r.expenses)}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Energy directed outward"})]})]}),e.jsxs(f,{className:"bg-gradient-subtle shadow-soft hover:shadow-zenith transition-all duration-300",children:[e.jsxs(j,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(v,{className:"text-sm font-medium text-muted-foreground",children:"Balance"}),e.jsx($,{className:"h-4 w-4 text-water-ring"})]}),e.jsxs(y,{children:[e.jsx("div",{className:`text-2xl font-bold ${r.balance>=0?"text-water-ring":"text-fire-ring"}`,children:g(r.balance)}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Flow of resources"})]})]})]}),e.jsxs(f,{children:[e.jsx(j,{children:e.jsx(v,{children:"Category Budgets"})}),e.jsx(y,{className:"space-y-4",children:d&&d.length>0?d.map(a=>e.jsx(Se,{category:a.category,spent:(E==null?void 0:E[a.category])||0,budgeted:a.amount},a.category)):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No budgets set for this month. Click 'Manage Budgets' to add some."})})]}),e.jsxs(f,{className:"shadow-soft",children:[e.jsx(j,{children:e.jsx(v,{className:"text-lg",children:"Recent Transactions"})}),e.jsx(y,{children:!s||s.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx($,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No transactions yet. Start by adding your first transaction."})]}):e.jsx("div",{className:"space-y-3",children:[...s].sort((a,u)=>u.date.getTime()-a.date.getTime()).slice(0,5).map(a=>e.jsxs("div",{className:"flex justify-between items-center p-3 rounded-lg bg-muted/50 hover:bg-muted transition-colors",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:a.description}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a.category})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:`font-bold ${a.type==="income"?"text-earth-ring":"text-fire-ring"}`,children:[a.type==="income"?"+":"-",g(a.amount)]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:a.date.toLocaleDateString()})]})]},a.id))})})]}),e.jsx(ge,{isOpen:t,onClose:()=>i(!1),onTransactionAdded:()=>{D({title:"Success",description:"Transaction added successfully."})}})]})}export{qe as default};
